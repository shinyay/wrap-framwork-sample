# Copilot Instructions for wrap-framework-sample

## Standard Commands

```bash
# Install dependencies
npm ci

# Build the project
npm run build

# Run tests
npm test

# Lint the code
npm run lint

# Start development server
npm run dev
```

## Project Structure

```
.
├── src/           # Application source code
│   ├── app.ts     # Express app configuration
│   └── index.ts   # Server entry point
├── test/          # Test files
├── dist/          # Build output (generated by tsc)
└── node_modules/  # Dependencies (generated by npm install)
```

## Directory Conventions

- **src/**: All application source code goes here
  - Keep business logic separate from server setup
  - Use TypeScript for all source files
  
- **test/**: All test files
  - Test files should follow `*.test.ts` naming convention
  - Use supertest for API endpoint testing

- **dist/**: Build output directory (do not commit)

## Coding Standards

1. **TypeScript**: All source code must be TypeScript
2. **Strict mode**: TypeScript strict mode is enabled
3. **ESLint**: Follow the ESLint rules defined in `.eslintrc.js`
4. **Testing**: Write tests for all new endpoints and business logic

## Dependency Management

### Rules for Adding Dependencies

1. **Minimize dependencies**: Only add dependencies that are absolutely necessary
2. **No heavy frameworks**: Keep the stack minimal (Express is sufficient)
3. **Security first**: Run `npm audit` before adding new packages
4. **Document why**: When adding a dependency, document the reason in the PR

### Prohibited

- No unnecessary frontend frameworks (this is a backend API)
- No database ORMs unless explicitly required by a feature
- No authentication libraries until auth feature is requested

## Port Configuration

The server uses environment variable `PORT` for configuration:
- Default: 3000
- Override: Set `PORT=<number>` before running

Example:
```bash
PORT=8080 npm run dev
```

## Development Workflow

1. Make changes in `src/`
2. Write tests in `test/`
3. Run `npm run lint` to check code style
4. Run `npm test` to verify tests pass
5. Run `npm run build` to ensure TypeScript compiles
6. Run `npm run dev` to test locally

## CI/CD Readiness

All scripts are designed to work in CI environments:
- `npm ci`: Reproducible installs
- `npm run build`: Must exit 0 on success
- `npm test`: Must exit 0 when all tests pass
- `npm run lint`: Must exit 0 when no issues found
